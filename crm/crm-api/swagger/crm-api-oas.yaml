openapi: 3.0.0
info:
  title: CRM API
  version: 1.0.0
  description: "All API requests must be made over HTTPS. Calls made over plain HTTP will be redirected to HTTPS.
  This API allows Impel DA (Sales AI/Chat AI) to interact with the shared CRM layer, enabling actions such as posting or updating new leads, retrieving lead details, updating consumer infor  mation, and adding new activities.\n\n**Glossary:**\n1.
    Impel CRM Layer: A unified persistence data layer designed for integration with all CRM partners. This layer aggregates all leads and activities from every CRM partner into one central repository.\n2.
    Lead: A sales opportunity that a dealership can pursue. Every lead contains information about the consumer, a vehicle of interest, sales team information and other details.\n3.
    Consumer: A person who may be interested in buying a specific vehicle(s). The Consumer stores the personal information and preferences of its subject. A Consumer may be referenced in one or more Leads.\n4.
    Salesperson: An individual representing the dealership, responsible for managing and converting leads into sales. Each lead is typically associated with a designated salesperson who oversees the sales process for that specific lead.\n5.
    Activity: Actions, interactions, or events associated with a lead. Activities provide insights into the progress and status of a lead and can include notes, appointments, outbound calls, etc."
servers:
  - description: Impel test environment
    url: https://crm-api-test.testenv.impel.io/
  - description: Impel production environment
    url: https://crm-api.impel.io/
#{{CRM_API_AWS_VALIDATION}}
paths:
  /leads:
    post:
      operationId: post-lead
      summary: "This endpoint creates a record for a Lead in the CRM persistence data layer. CRM IDs and salesperson fields should only be included in the request body if the caller is creating a lead on behalf of the CRM. Chat AI should not include these fields."
      description: |
        **Timestamp Formats:** The `lead_ts` field supports timestamps in three formats:
        1. **UTC Format:** Append 'Z' to denote UTC time. Example: `2023-09-22T14:00:00Z`.
        2. **Local Time with Offset:** Include the time offset from UTC. Example: `2024-02-02T14:00:00-0500`.
        3. **Local Time with Timezone Metadata:** Specify local time, with the timezone defined during onboarding. Example: `2023-09-22T14:00:00`.
      #{{CREATE_LEAD_LAMBDA_INFO}}
      tags:
        - Leads
      responses:
        '201':
          "$ref": "#/components/responses/201"
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The consumer_id of the request didn't match any existing records on Impel.
        '409':
          description: Conflict. Lead record couldn't be created due to a conflict with an existing record with the same crm_lead_id and consumer_id on Impel.
        '500':
          "$ref": "#/components/responses/500"
      parameters:
      - "$ref": "#/components/parameters/partnerId"
      - "$ref": "#/components/parameters/xApiKey"
      requestBody:
        description: "Please click on \"Schema\" next to \"Example Value\" below to view the detailed description of JSON properties in the request body."
        required: true
        content:
          application/json:
            schema:
              allOf:
                - type: object
                  properties:
                    consumer_id:
                      type: integer
                      description: Unique identifier for the associated consumer
                      example: 2
                    crm_lead_id:
                      type: string
                      description: Lead ID in the CRM
                      example: 'D973DAF4-D0F2'
                      maxLength: 100
                    lead_ts:
                      type: string
                      description: Lead timestamp in UTC format
                      format: date-time
                      example: "2023-09-22T14:00:00Z"
                - $ref: '#/components/schemas/Lead'
                - required:
                    - consumer_id
                    - lead_status
                    - vehicles_of_interest
                - type: object
                  properties:
                    vehicles_of_interest:
                      allOf:
                        - type: array
                          items:
                            description: Object containing description of the vehicle
                            type: object
                            properties:
                              crm_vehicle_id:
                                type: string
                                description: Vehicle ID assigned by CRM (Car ID, Stock, License plate, etc.)
                                example: '8EEAD89E-E87'
                                maxLength: 50
                        - $ref: "#/components/schemas/VehiclesOfInterest"
                - type: object
                  properties:
                    salespersons:
                      type: array
                      items:
                        allOf:
                          - $ref: '#/components/schemas/Salesperson'
                - type: object
                  properties:
                    metadata:
                      description: Metadata for a lead
                      type: object
                      additionalProperties: true
                      example: {"crmLeadStatus": "Active", "appraisalLink": "https://abc.com"}
    get:
      operationId: get-leads
      summary: Retrieve a list of all leads for a given dealer id.
      #{{RETRIEVE_LEADS_LAMBDA_INFO}}
      tags:
        - Leads
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                type: object
                properties:
                  leads:
                    type: array
                    description: A list of all leads for a given partner id and dealer id.
                    items:
                      type: object
                      properties:
                        lead_id:
                          type: integer
                          description: The ID of the lead
                          example: "123456"
                        consumer_id:
                          type: integer
                          description: Unique identifier for the associated consumer
                          example: 2
                        lead_status:
                          type: string
                          description: A status that can be used to group leads that are in similar state
                          example: "ACTIVE"
                          maxLength: 50
                        lead_substatus:
                          type: string
                          description: Current state of the lead
                          example: "Appointment Set"
                          maxLength: 50
                        lead_comment:
                          type: string
                          description: Comment about the lead or generated text from the source on behalf of the lead
                          example: "Does this car have a sunroof?"
                          maxLength: 5000
                        lead_origin:
                          type: string
                          description: The first point of contact or channel through which the lead is generated
                          example: "INTERNET"
                          maxLength: 100
                        lead_source:
                          type: string
                          description: The specific channel through which the lead was generated
                          example: cars.com
                          maxLength: 100
                        vehicles_of_interest:
                          allOf:
                            - $ref: '#/components/schemas/VehiclesOfInterest'
                            - type: array
                              items:
                                type: object
                                properties:
                                  db_creation_date:
                                    type: string
                                    format: date-time
                                    description: The created datetime of the vehicle in the unified CRM layer.
                                    example: "2023-10-16T20:44:12.027184+00:00"
                        metadata:
                          description: Metadata for a lead
                          type: object
                          additionalProperties: true
                          example: {"crmLeadStatus": "Active", "appraisalLink": "https://abc.com"}
                        lead_ts:
                          type: string
                          format: date-time
                          description: The created datetime of the lead in the CRM.
                          example: "2023-10-16T20:44:12.027184+00:00"
                        db_creation_date:
                          type: string
                          format: date-time
                          description: The created datetime of the lead in the unified CRM layer.
                          example: "2023-10-16T20:44:12.027184+00:00"
                  pagination:
                    type: object
                    description: Information related to pagination.
                    properties:
                      records_on_page:
                        type: integer
                        description: The number of records on the page.
                        example: 1
                      total_records:
                        type: integer
                        description: Total records available for request.
                        example: 1
                      total_pages:
                        type: integer
                        description: Total pages available with records.
                        example: 1
                      current_page:
                        type: integer
                        description: The current page number.
                        example: 1
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '500':
          "$ref": "#/components/responses/500"
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": '#/components/parameters/dbCreationDateStart'
        - "$ref": '#/components/parameters/dbCreationDateEnd'
        - name: dealer_id
          in: query
          description: The ID assigned to the dealership by Impel during onboarding.
          required: false
          schema:
            type: string
        - name: consumer_id
          in: query
          description: The ID of the consumer. Requires `dealer_id` to be provided when querying by `consumer_id`.
          required: false
          schema:
            type: integer
        - name: sort_order
          in: query
          description: Determines the sorting order of the response data by "db_creation_date". Accepts "asc" for ascending and "desc" for descending.
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
        - "$ref": '#/components/parameters/page'
        - "$ref": '#/components/parameters/resultCount'
  /leads/{lead_id}:
    get:
      operationId: get-lead
      summary: Retrieve a specific lead by ID
      #{{RETRIEVE_LEAD_LAMBDA_INFO}}
      tags:
        - Leads
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/leadId"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      consumer_id:
                        type: integer
                        description: Unique identifier for the associated consumer
                        example: 2
                  - $ref: '#/components/schemas/Lead'
                  - type: object
                    properties:
                      vehicles_of_interest:
                        allOf:
                          - $ref: '#/components/schemas/VehiclesOfInterest'
                          - type: array
                            items:
                              type: object
                              properties:
                                db_creation_date:
                                  type: string
                                  format: date-time
                                  description: The created datetime of the vehicle in the unified CRM layer.
                                  example: "2023-10-16T20:44:12.027184+00:00"
                      metadata:
                        description: Metadata for a lead
                        type: object
                        additionalProperties: true
                        example: {"crmLeadStatus": "Active", "appraisalLink": "https://abc.com"}
                      lead_ts:
                        type: string
                        format: date-time
                        description: The created datetime of the lead in the CRM.
                        example: "2023-10-16T20:44:12.027184+00:00"
                      db_creation_date:
                        type: string
                        format: date-time
                        description: The created datetime of the lead in the unified CRM layer.
                        example: "2023-10-16T20:44:12.027184+00:00"
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          "$ref": "#/components/responses/404"
        '500':
          "$ref": "#/components/responses/500"
    put:
      operationId: put-lead
      summary: This endpoint updates an existing lead in the CRM persistence data layer. The existing vehicles in the 'vehicles_of_interest' array won't be modified. Instead, new vehicles will be added to the array.
      #{{UPDATE_LEAD_LAMBDA_INFO}}
      tags:
        - Leads
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The lead_id or consumer_id of the request didn't match any existing records on Impel.
        '500':
          "$ref": "#/components/responses/500"
      parameters:
      - "$ref": "#/components/parameters/partnerId"
      - "$ref": "#/components/parameters/xApiKey"
      - "$ref": "#/components/parameters/leadId"
      requestBody:
        description: Updated details of the lead
        required: true
        content:
          application/json:
            schema:
              allOf:
                - type: object
                  properties:
                    consumer_id:
                      type: integer
                      description: Unique identifier for the associated consumer
                      example: 2
                - $ref: '#/components/schemas/Lead'
                - type: object
                  properties:
                    salespersons:
                      type: array
                      items:
                        $ref: '#/components/schemas/Salesperson'
                - type: object
                  properties:
                    metadata:
                      description: Metadata for a lead
                      type: object
                      additionalProperties: true
                      example: {"crmLeadStatus": "Active", "appraisalLink": "https://abc.com"}

  /leads/{lead_id}/status:
    get:
      operationId: get-lead-status
      summary: Retrieve the current status of a specific lead.
      #{{RETRIEVE_LEAD_STATUS_LAMBDA_INFO}}
      tags:
        - Leads
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/leadId"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                type: object
                properties:
                  lead_status:
                    type: string
                    description: The status of the lead
                    enum:
                      - ACTIVE
                      - BAD
                      - DUPLICATE
                      - LOST
                      - BOOKED
                      - INACTIVE
                      - CLOSED
                    example: "ACTIVE"
        '202':
          "$ref": "#/components/responses/202"
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          "$ref": "#/components/responses/404"
        '500':
          "$ref": "#/components/responses/500"

  /leads/{lead_id}/salespersons:
    get:
      operationId: get-lead-salespersons
      summary: Get an array of salespersons assigned to a lead, with the primary salesperson listed first.
      #{{RETRIEVE_SALESPERSONS_DATA_LAMBDA_INFO}}
      tags:
        - Leads
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/leadId"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Salesperson'
        '202':
          "$ref": "#/components/responses/202"
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The lead_id of the request didn't match any existing records on Impel, or the lead does not have an associated salesperson.
        '500':
          "$ref": "#/components/responses/500"
  /leads/{lead_id}/activities:
    get:
      operationId: get-lead-activities
      summary: This endpoint returns all existing activites for a given lead ID.
      #{{RETRIEVE_LEAD_ACTIVITIES_LAMBDA_INFO}}
      tags:
        - Leads
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/leadId"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistance data layer.
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/Activity'
                    - type: object
                      properties:
                        activity_id:
                          type: number
                          description: The ID of the activity in the CRM persistence data layer.
                          example: 123
                        crm_activity_id:
                          type: string
                          description: The ID of the activity in the CRM.
                          example: "12345"
                        db_creation_date:
                          type: string
                          format: date-time
                          description: The created datetime of the activity in the unified CRM layer.
                          example: "2023-10-16T20:44:12.027184+00:00"


  /leads/crm/{crm_lead_id}:
    get:
      operationId: get-lead-by-crm-ids
      summary: Retrieve a specific lead by CRM Lead ID and CRM Dealer ID
      #{{RETRIEVE_LEAD_BY_CRM_IDS_LAMBDA_INFO}}
      tags:
        - Leads
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/crmLeadId"
        - "$ref": "#/components/parameters/crmDealerId"
        - "$ref": "#/components/parameters/integrationPartnerName"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistance data layer.
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      consumer_id:
                        type: integer
                        description: Unique identifier for the associated consumer
                        example: 2
                  - type: object
                    properties:
                      lead_id:
                        type: integer
                        description: Unique lead_id in the Impel system
                        example: 3
                  - $ref: '#/components/schemas/Lead'
                  - type: object
                    properties:
                      vehicles_of_interest:
                        allOf:
                          - $ref: '#/components/schemas/VehiclesOfInterest'
                          - type: array
                            items:
                              type: object
                              properties:
                                db_creation_date:
                                  type: string
                                  format: date-time
                                  description: The created datetime of the vehicle in the unified CRM layer.
                                  example: "2023-10-16T20:44:12.027184+00:00"
                      lead_ts:
                        type: string
                        format: date-time
                        description: The created datetime of the lead in the CRM.
                        example: "2023-10-16T20:44:12.027184+00:00"
                      db_creation_date:
                        type: string
                        format: date-time
                        description: The created datetime of the lead in the unified CRM layer.
                        example: "2023-10-16T20:44:12.027184+00:00"
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          "$ref": "#/components/responses/404"
        '500':
          "$ref": "#/components/responses/500"

  /consumers:
    post:
      operationId: post-consumer
      summary: This endpoint creates a record for a Consumer in the CRM persistence data layer. The crm_consumer_id field should only be included in the request body if the caller is creating a consumer on behalf of the CRM. Chat AI should not include this field.
      #{{CREATE_CONSUMER_LAMBDA_INFO}}
      tags:
        - Consumers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/dealerId"
      requestBody:
        description: "Please click on \"Schema\" next to \"Example Value\" below to view the detailed description of JSON properties in the request body."
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Consumer'
      responses:
        '200':
          description: Consumer found and updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  consumer_id:
                    type: integer
                    description: ID of the existing consumer
        '201':
          description: Consumer successfully created
          content:
            application/json:
              schema:
                type: object
                properties:
                  consumer_id:
                    type: integer
                    description: ID of the newly created consumer
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The dealer_id of the request didn't match any existing records on Impel.
        '500':
          "$ref": "#/components/responses/500"

  /consumers/{consumer_id}:
    get:
      operationId: get-consumer
      summary: Retrieve consumer by ID
      #{{RETRIEVE_CONSUMER_LAMBDA_INFO}}
      tags:
        - Consumers
      description: Returns a consumer by their ID.
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/consumerId"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      dealer_id:
                        type: string
                        description: The ID assigned to the dealership by Impel during onboarding.
                        example: "test_dealer_id"
                        maxLength: 100
                  - $ref: '#/components/schemas/Consumer'
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The consumer_id of the request didn't match any existing records on Impel.
        '500':
          "$ref": "#/components/responses/500"
    put:
      operationId: put-consumer
      summary: This endpoint updates an existing consumer in the CRM persistence data layer.
      #{{UPDATE_CONSUMER_LAMBDA_INFO}}
      tags:
        - Consumers
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The consumer_id of the request didn't match any existing records on Impel.
        '500':
          "$ref": "#/components/responses/500"
      parameters:
      - "$ref": "#/components/parameters/partnerId"
      - "$ref": "#/components/parameters/xApiKey"
      - "$ref": "#/components/parameters/consumerId"
      requestBody:
        description: Updated details of the consumer
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Consumer'
  /consumers/crm/{crm_consumer_id}:
    get:
      operationId: get-consumer-by-crm-ids
      summary: Retrieve a specific consumer by CRM Consumer ID and CRM Dealer ID
      #{{RETRIEVE_CONSUMER_BY_CRM_IDS_LAMBDA_INFO}}
      tags:
        - Consumers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/crmConsumerId"
        - "$ref": "#/components/parameters/crmDealerId"
        - "$ref": "#/components/parameters/integrationPartnerName"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      consumer_id:
                        type: number
                        description: ID of the consumer
                        example: 2
                      dealer_id:
                        type: string
                        description: The ID assigned to the dealership by Impel during onboarding.
                        example: "test_dealer_id"
                        maxLength: 100
                  - $ref: '#/components/schemas/Consumer'
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The consumer_id of the request didn't match any existing records on Impel.
        '500':
          "$ref": "#/components/responses/500"

  /activities:
    post:
      operationId: post-activity
      summary: This endpoint allows for the creation of a new activity associated with a specific lead in the CRM persistence layer. The "activity_type" and "activity_requested_ts" fields are required for all activities. For activities needing scheduling or completion by a specific date and time, the "activity_due_ts" is essential. Additionally, when the activity_type is set to "note", the notes field becomes mandatory.
      #{{CREATE_ACTIVITY_LAMBDA_INFO}}
      tags:
        - Activities
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - in: query
          name: lead_id
          required: true
          description: Impel Lead ID for which details are to be retrieved or updated.
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Activity"
      responses:
        '201':
          description: Activity successfully created
          content:
            application/json:
              schema:
                type: object
                properties:
                  activity_id:
                    type: integer
                    description: ID of the newly created activity
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          "$ref": "#/components/responses/404"
        '500':
          "$ref": "#/components/responses/500"
  /activities/{activity_id}:
    put:
      operationId: put-activity
      summary: This endpoint updates an existing activity in the CRM persistence data layer.
      #{{UPDATE_ACTIVITY_LAMBDA_INFO}}
      tags:
        - Activities
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - "$ref": "#/components/parameters/activityId"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The activity of the request didn't match any existing records on Impel.
        '500':
          "$ref": "#/components/responses/500"
      requestBody:
        content:
          application/json:
             schema:
              type: object
              required:
                - crm_activity_id
              properties:
                crm_activity_id:
                  type: string
                  description: The ID assigned to the activity in the CRM.
                  example: "12345"
                  maxLength: 50
    get:
      operationId: get-activity
      summary: Retrieve a specific activity by ID
      #{{RETRIEVE_ACTIVITY_LAMBDA_INFO}}
      tags:
        - Activities
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - name: activity_id
          in: path
          required: true
          description: The ID of the activity in the CRM persistence data layer.
            *** Ask for a PDF document, which explains the guidelines for developing the webhook that will receive this activity ID. Once you receive this notification on the webhook, you can call this endpoint.
          schema:
            type: integer
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      dealer_id:
                        type: string
                        description: The ID assigned to the dealership by Impel during onboarding.
                  - $ref: '#/components/schemas/Activity'
                  - type: object
                    properties:
                      lead_id:
                        type: integer
                      activity_due_ts:
                        type: string
                        format: date-time
                        description: Timestamp indicating when the Activity is to take place, adjusted to the dealer's timezone offset. This is required when an Activity needs to be scheduled or completed by a specific date and time, such as an appointment or phone_call_task..
                        example: "2024-02-02T14:00:00-05:00"
                        pattern: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}[+-]\d{2}:\d{2}$'
                      activity_requested_ts:
                        type: string
                        format: date-time
                        description: Timestamp in adjusted for the dealer's timezone offset when the Activity was requested.
                        example: "2024-02-02T12:00:00-05:00"
                        pattern: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}[+-]\d{2}:\d{2}$'
                      crm_lead_id:
                        type: string
                        description: Original lead id given by CRM
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The activity_id of the request didn't match any existing records on Impel.
        '500':
          "$ref": "#/components/responses/500"
  /dealers:
    get:
      operationId: get-dealers
      summary: This endpoint returns all active dealers for a given integration partner.
      #{{RETRIEVE_DEALERS_LAMBDA_INFO}}
      tags:
        - Dealers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - name: integration_partner_name
          in: query
          description: The name of the integration partner assigned by Impel. Can query for multiple partner names when concatenated by the | operator
          required: true
          schema:
            type: string
            example: "TESTCRM"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Dealer"
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The integration_partner_name of the request didn't match any existing records on Impel.
        '500':
          "$ref": "#/components/responses/500"
  /dealers/config:
    get:
      operationId: get-dealers-config
      summary: This endpoint returns dealers config for a given params.
      #{{DEALERS_CONFIG_LAMBDA_INFO}}
      tags:
        - Dealers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DealerConfiguration"
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The integration_partner_name of the request didn't match any existing records on Impel.
        '405':
          description: Method Not Allowed
        '500':
          "$ref": "#/components/responses/500"
    put:
      operationId: put-dealers-config
      summary: This endpoint updates dealer config in shared layer.
      #{{DEALERS_CONFIG_LAMBDA_INFO}}
      tags:
        - Dealers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - integration_partner_name
                - product_dealer_id
              properties:
                integration_partner_name:
                  description: The name of the integration partner assigned by Impel
                  type: string
                  example: "TESTCRM"
                product_dealer_id:
                  description: The name of the dealer configs in shared layer and in dynamoDB
                  type: string
                  example: "tekion-test-dealer"
                is_active_salesai:
                  type: boolean
                  description: Activates sales ai for the dealer
                  example: false
                is_active_chatai:
                  type: boolean
                  description: Activates sales ai for the dealer
                  example: false
                crm_dealer_id:
                  type: string
                  description: The ID of the dealer in the CRM.
                  example: "12345"
                metadata:
                  type: object
                  description: Additional metadata associated with the dealership.
                  properties:
                    timezone:
                      type: string
                      description: The timezone of the dealership or rooftop (IANA Time Zone Database Format)
                      example: "America/New_York"
      responses:
        '200':
          description: Information updated.
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The integration_partner_name of the request didn't match any existing records on Impel.
        '405':
          description: Method Not Allowed
        '500':
          "$ref": "#/components/responses/500"
    post:
      operationId: post-dealers-config
      summary: This endpoint will create new dealer config in shared layer.
      #{{DEALERS_CONFIG_LAMBDA_INFO}}
      tags:
        - Dealers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - integration_partner_name
                - product_dealer_id
                - sfdc_account_id
                - dealer_name
              properties:
                integration_partner_name:
                  type: string
                  description: Name of the integration partner.
                product_dealer_id:
                  type: string
                  description: Unique identifier for the product dealer.
                sfdc_account_id:
                  type: string
                  description: Salesforce account ID associated with the dealer.
                dealer_name:
                  type: string
                  description: Name of the dealer.
                timezone:
                  type: string
                  description: Timezone of the dealer's location.
                dealer_location_name:
                  type: string
                  description: Location name of the dealer.
                country:
                  type: string
                  description: Country where the dealer is located.
                state:
                  type: string
                  description: State where the dealer is located.
                city:
                  type: string
                  description: City where the dealer is located.
                zip_code:
                  type: string
                  description: ZIP code of the dealer's location.
                crm_dealer_id:
                  type: string
                  description: CRM dealer ID.
                is_active_salesai:
                  type: boolean
                  description: Indicates if the dealer is active for SalesAI.
                is_active_chatai:
                  type: boolean
                  description: Indicates if the dealer is active for ChatAI.
                metadata:
                  type: object
                  description: Metadata associated with the dealer.
                  properties:
                    userId:
                      type: string
                      description: User ID associated with the metadata.
                    adf_email_recipients:
                      type: array
                      description: List of ADF email recipients.
                      items:
                        type: string
      responses:
        '201':
          description: Dealer configuration created successfully dealer_id.
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. The integration_partner_name of the request didn't match any existing records on Impel.
        '405':
          description: Method Not Allowed
        '500':
          "$ref": "#/components/responses/500"
  /dealers/{dealer_id}:
    get:
      operationId: get-dealer
      summary: Get active dealer by ID. For internal use only.
      #{{RETRIEVE_DEALER_BY_ID_LAMBDA_INFO}}
      tags:
        - Dealers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - name: dealer_id
          in: path
          description: The ID assigned to the dealership by Impel during onboarding.
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 100
            example: "test_dealer_id"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                type: object
                description: A dealership or rooftop in the CRM layer.
                properties:
                  product_dealer_id:
                    type: string
                    description: The ID assigned to the dealership by Impel during onboarding. Corresponds to the dealer_id in the request.
                    example: "test_dealer_id"
                  dealer_integration_partner_id:
                    type: number
                    description: The ID of the dealer integration partner in the CRM layer.
                    example: 24
                  dealer_name:
                    type: string
                    description: The name of the dealer.
                    example: "Test Dealership"
                  timezone:
                    type: string
                    description: The timezone of the dealership or rooftop (IANA Time Zone Database Format)
                    example: "America/New_York"
                  integration_partner_name:
                    type: string
                    description: The name of the integration partner assigned by Impel.
                    example: "TESTCRM"
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. No active dealership found with matching dealer_id.
        '500':
          "$ref": "#/components/responses/500"
  /dealers/{dealer_id}/lead_statuses:
    get:
      summary: Get lead statuses from CRM API.
      #{{DEALER_LEAD_STATUSES_LAMBDA_INFO}}
      tags:
        - Dealers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - name: dealer_id
          in: path
          description: The ID assigned to the dealership by Impel during onboarding.
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 40
            example: "test_dealer_id"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                type: object
                items:
                  $ref: '#/components/schemas/DealerLeadStatuses'
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. No lead status found with matching dealer_id.
        '500':
          "$ref": "#/components/responses/500"

  /dealers/{dealer_id}/salespersons:
    get:
      operationId: get-dealer-salespersons
      summary: Get saleslpersons from CRM API.
      #{{RETRIEVE_SALESPERSONS_BY_DEALER_ID_LAMBDA_INFO}}
      tags:
        - Dealers
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
        - name: dealer_id
          in: path
          description: The ID assigned to the dealership by Impel during onboarding.
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 40
            example: "test_dealer_id"
      responses:
        '200':
          description: Success. The request was received and successfully processed by the CRM persistence data layer.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SalespersonFromCRM'
        '400':
          "$ref": "#/components/responses/400"
        '401':
          "$ref": "#/components/responses/401"
        '404':
          description: Not Found. No salespersons found with matching dealer_id.
        '500':
          "$ref": "#/components/responses/500"
  /upload:
    post:
      operationId: post-upload
      summary: This endpoint is designated for internal operations, specifically for uploading standardized, transformed data into the CRM API database.
      #{{UPLOAD_DATA_LAMBDA_INFO}}
      tags:
        - Upload
      parameters:
        - "$ref": "#/components/parameters/partnerId"
        - "$ref": "#/components/parameters/xApiKey"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                product_dealer_id:
                  type: string
                  description: The ID assigned to the dealership by Impel during onboarding.
                  example: "test_dealer_id"
                  maxLength: 100
                lead:
                  allOf:
                    - type: object
                      properties:
                        crm_lead_id:
                          type: string
                          description: Lead id in the CRM
                          maxLength: 100
                          example: 'D973DAF4-D0F2'
                        lead_ts:
                          type: string
                          description: Lead timestamp in UTC format
                          format: date-time
                          example: "2023-09-22T14:00:00Z"
                    - $ref: "#/components/schemas/Lead"
                    - type: object
                      properties:
                        vehicles_of_interest:
                          allOf:
                            - type: array
                              items:
                                description: Object containing description of the vehicle
                                type: object
                                properties:
                                  crm_vehicle_id:
                                    type: string
                                    description: Vehicle ID assigned by CRM (Car ID, Stock, License plate, etc.)
                                    example: '8EEAD89E-E87'
                                    maxLength: 50
                            - $ref: "#/components/schemas/VehiclesOfInterest"
                consumer:
                  allOf:
                    - type: object
                      properties:
                        crm_consumer_id:
                          type: string
                          description: The ID of the consumer in the CRM
                          example: "123abc-1234ab-123abc"
                          maxLength: 100
                    - $ref: "#/components/schemas/Consumer"
                salesperson:
                  allOf:
                    - $ref: '#/components/schemas/Salesperson'
                    - required:
                      - crm_salesperson_id
                      - first_name
                      - last_name
                      - email
                      - phone
      responses:
        '200':
          description: Data successfully uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  lead_id:
                    type: integer
                    description: ID of the lead that was created.
        '400':
          "$ref": "#/components/responses/400"
        '404':
          description: Not Found. The dealer_id of the request didn't match any existing records on Impel.
        '409':
          description: Conflict. Lead record couldn't be created due to a conflict with an existing record with the same crm_lead_id and customer_id on Impel.
components:
  schemas:
    Activity:
      description: A action that is performed in the CRM for a lead.
      type: object
      required:
        - activity_type
        - activity_requested_ts
      properties:
        activity_type:
          type: string
          description: Type of activity
          enum:
            - outbound_call
            - appointment
            - note
            - phone_call_task
          example: "note"
        activity_due_ts:
          type: string
          format: date-time
          description: Timestamp in UTC Time (Zero Offset) indicating when the activity is to take place. This is required when an activity needs to be scheduled or completed by a specific date and time, such as an appointment or phone_call_task.
          example: "2023-09-22T14:00:00Z"
          pattern: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$'
        activity_requested_ts:
          type: string
          format: date-time
          description: Timestamp in UTC Time (Zero Offset) when the activity was requested.
          example: "2023-09-22T12:00:00Z"
          pattern: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$'
        notes:
          type: string
          description: Notes about the activity. Required when the activity type is "note".
          example: "Customer requested a follow-up call."
          maxLength: 5000
        contact_method:
          type: string
          description: The method for which the consumer was contacted with.
          enum:
            - email
            - phone
            - text
          example: "email"
          maxLength: 20
    DealerConfiguration:
      description: A dealers configuration in the CRM layer.
      type: object
      properties:
        dealer_integration_partner_id:
          type: number
          description: The ID of the dealer integration partner in the CRM layer.
          example: 36
        crm_dealer_id:
          type: string
          description: The ID of the dealer in the CRM.
          example: "test_crm_dealer_id_1"
        product_dealer_id:
          type: string
          description: The ID assigned to the dealership by Impel during onboarding.
          example: "test_crm_dealer_id"
        dealer_name:
          type: string
          description: The name of the dealer.
          example: "TESTDEALERNAME"
        integration_partner_name:
          type: string
          description: The name of the CRM integration partner.
          example: "TESTCRM"
        sfdc_account_id:
          type: string
          description: The Salesforce account ID associated with the dealer.
          example: "TEST"
        dealer_location_name:
          type: string
          description: Location name of the dealer.
        country:
          type: string
          description: Country where the dealer is located.
        state:
          type: string
          description: State where the dealer is located.
        city:
          type: string
          description: City where the dealer is located.
        zip_code:
          type: string
          description: ZIP code of the dealer's location.
        timezone:
          type: string
          description: The timezone of the dealership.
          example: "US/Eastern"
        metadata:
          type: object
          description: Additional metadata associated with the dealership.
          properties:
            userId:
              type: string
              description: User ID associated with the metadata.
            adf_email_recipients:
              type: array
              description: List of ADF email recipients.
              items:
                type: string
        is_active_salesai:
          type: boolean
          description: Indicates if the dealer is active for SalesAI.
        is_active_chatai:
          type: boolean
          description: Indicates if the dealer is active for ChatAI.
    Dealer:
      description: A dealership or rooftop in the CRM layer.
      type: object
      properties:
        dealer_integration_partner_id:
          type: number
          description: The ID of the dealer integration partner in the CRM layer.
          example: 24
        crm_dealer_id:
          type: string
          description: The ID of the dealer in the CRM.
          example: "12345"
        product_dealer_id:
          type: string
          description: The ID assigned to the dealership by Impel during onboarding.
          example: "test_dealer_id"
        dealer_name:
          type: string
          description: The name of the dealer.
          example: "Test Dealership"
    DealerLeadStatuses:
      description: Object containing generic and custom lead statuses
      type: object
      properties:
        generic_statuses:
          description: List of generic lead statuses.
          type: array
          items:
            description: The generic status name.
            type: string
            example: "New Lead"
        custom_statuses:
          description: List of custom lead statuses.
          type: array
          items:
            description: The custom status name.
            type: string
            example: "Follow Up"
    VehiclesOfInterest:
      description: An array of vehicles the lead was interested in
      type: array
      items:
        description: Object containing description of the vehicle
        type: object
        properties:
          vin:
            type: string
            description: Vehicle Identification Number
            maxLength: 20
            example: "1HGBH41JXMN109186"
          stock_number:
            type: string
            description: Vehicle stock number
            maxLength: 50
            example: SN12345
          type:
            type: string
            description: Type of the vehicle (e.g., Sedan, SUV, Truck)
            maxLength: 80
            example: SUV
          class:
            type: string
            description: Classification of the vehicle (e.g., Compact, Midsize, Luxury)
            maxLength: 80
            example: Compact
          mileage:
            type: number
            description: Mileage of the vehicle
            example: 50000
          year:
            type: number
            description: The sales model year of the vehicle
            minimum: 1800
            maximum: 3000
            example: 2023
          make:
            type: string
            description: The brand or make of the vehicle
            maxLength: 80
            example: Ford
          model:
            type: string
            description: The model name of the vehicle
            maxLength: 80
            example: F-150
          oem_name:
            type: string
            description: OEM name of the vehicle
            maxLength: 80
            example: Ford
          trim:
            type: string
            description: Trim of the vehicle
            minLength: 1
            maxLength: 50
            example: GT
          body_style:
            type: string
            description: Body style of the vehicle
            maxLength: 80
            example: SUV
          transmission:
            type: string
            description: Transmission of the vehicle
            maxLength: 80
            example: Manual
          interior_color:
            type: string
            description: Interior color of the vehicle
            maxLength: 80
            example: Black
          exterior_color:
            type: string
            description: Exterior color of the vehicle
            maxLength: 80
            example: White
          price:
            type: number
            format: float
            description: Price of the vehicle
            example: 25000.00
          status:
            type: string
            description: Current status of the vehicle (e.g., Available, Sold)
            maxLength: 50
            example: Available
          condition:
            type: string
            description: Condition of the vehicle
            enum: [New, Used, CPO]
            example: Used
            maxLength: 20
          odometer_units:
            type: string
            description: Units for the odometer reading (e.g., miles, kilometers)
            enum: [miles, kilometers]
            example: miles
            maxLength: 20
          vehicle_comments:
            type: string
            description: Comments about the vehicle
            maxLength: 5000
            example: Has a scratch
          trade_in_vin:
            type: string
            description: VIN of the trade-in vehicle
            maxLength: 20
            example: "1HGBH41JXMN109186"
          trade_in_year:
            type: number
            description: The sales model year of the trade-in vehicle
            minimum: 1800
            maximum: 3000
            example: 2021
          trade_in_make:
            type: string
            description: The brand or make of the trade-in vehicle
            maxLength: 80
            example: Ford
          trade_in_model:
            type: string
            description: The model name of the trade-in vehicle
            maxLength: 80
            example: F-150
          metadata:
            type: object
            additionalProperties: true
            example: {"min_price": 25000.00, "max_price": 30000.00}
    Consumer:
      description: An object containing all information about a person interested in a vehicle
      type: object
      properties:
        crm_consumer_id:
          type: string
          description: The ID of the consumer in the CRM
          example: "123abc-1234ab-123abc"
        first_name:
          type: string
          description: Consumer first name
          maxLength: 50
          example: John
        last_name:
          type: string
          description: Consumer last name
          maxLength: 50
          example: Doe
        middle_name:
          type: string
          description: Consumer middle name
          maxLength: 50
          example: Michael
        email:
          type: string
          description: Consumer primary email address
          maxLength: 100
          example: john.doe@example.com
        phone:
          type: string
          description: Consumer primary phone number
          maxLength: 20
          example: "+11231231134"
        email_optin_flag:
          type: boolean
          description: Flag to indicate if the consumer has opted in for email
          default: true
          example: true
        sms_optin_flag:
          type: boolean
          description: Flag to indicate if the consumer has opted in for SMS notifications
          default: true
          example: true
        city:
          type: string
          description: City where the consumer resides
          maxLength: 100
          example: New York
        country:
          type: string
          description: Country where the consumer resides
          maxLength: 100
          example: USA
        address:
          type: string
          description: Complete address of the consumer
          maxLength: 100
          example: "123 Main St, Apt 4B"
        postal_code:
          type: string
          description: Postal or ZIP code for the consumer's address
          maxLength: 20
          example: "10001"
    Lead:
      description: An object containing all information about a lead
      type: object
      properties:
        lead_status:
          type: string
          description: A status that can be used to group leads that are in similar state
          maxLength: 50
          example: "ACTIVE"
        lead_substatus:
          type: string
          description: Current state of the lead
          maxLength: 50
          example: "Appointment Set"
        lead_comment:
          type: string
          description: Comment about the lead or generated text from the source on behalf of the lead
          maxLength: 10000
          example: "Does this car have a sunroof?"
        lead_origin:
          type: string
          description: The first point of contact or channel through which the lead is generated
          enum: [INTERNET, CALL, WALK-IN, THIRD PARTY, OTHER]
          example: "INTERNET"
          maxLength: 100
        lead_source:
          type: string
          description: The specific channel through which the lead was generated.
          maxLength: 200
          example: cars.com
        lead_source_detail:
          type: string
          description: The specific detail about the lead source.
          maxLength: 200
          example: "Inventory Leads Website"
        vehicles_of_interest:
          $ref: '#/components/schemas/VehiclesOfInterest'
    
    Salesperson:
      description: An object containing all information about a salesperson
      type: object
      required:
        - crm_salesperson_id
      properties:
        crm_salesperson_id:
          type: string
          description: The ID of the salesperson in the CRM
          example: "123abc-1234ab-123abc"
          maxLength: 100
        first_name:
          type: string
          description: First name of the salesperson
          example: "John"
          maxLength: 50
        last_name:
          type: string
          description: Last name of the salesperson
          example: "Smith"
          maxLength: 50
        email:
          type: string
          description: Email address of the salesperson
          example: "john.smith@example.com"
          maxLength: 50
        phone:
          type: string
          description: Phone number of the salesperson
          example: "123-456-7890"
          maxLength: 20
        position_name:
          type: string
          description: Salesperson position or role
          example: "Sales Manager"
          maxLength: 50
        is_primary:
          type: boolean
          description: "Indicates whether the salesperson is the primary contact"
    SalespersonFromCRM:
        description: An object containing extending information about a salesperson
        type: object
        properties:
          Emails:
            type: array
            description: Email addresses of the salesperson
            items:
              type: string
            example:
              - "john.smith@example.com"
              - "jsmith@example.com"
            maxLength: 50
          FirstName:
            type: string
            description: First name of the salesperson
            example: "John"
            maxLength: 50
          LastName:
            type: string
            description: Last name of the salesperson
            example: "Smith"
            maxLength: 50
          FullName:
            type: string
            description: Full name of the salesperson
            example: "John Smith"
            maxLength: 100
          Phones:
            type: array
            description: Phone numbers of the salesperson
            items:
              type: string
            example:
              - "123-456-7890"
              - "987-654-3210"
            maxLength: 20
          UserId:
            type: string
            description: The ID of the salesperson in the CRM
            example: "123abc-1234ab-123abc"
            maxLength: 100
          PositionName:
            type: string
            description: Salesperson position or role
            example: "Sales Manager"
            maxLength: 50

  responses:
    '201':
      description: Lead successfully created
      content:
        application/json:
          schema:
            type: object
            properties:
              lead_id:
                type: integer
                description: ID of the lead that was created.
    '202':
      description: Accepted. The request was received but failed to be processed by the CRM.
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
    '400':
      description: This indicates Bad Request. For example this error can occur if
        a required property in the request JSON is missing.
    '401':
      description: This request is unauthorized. The authorization credentials are
        missing or are wrong. For example if the partner_id or the x_api_key provided
        in the header are wrong/missing. This error can also occur if the dealer_id
        provided hasn't been configured with Impel.
    '404':
      description: Not Found. The lead_id of the request didn't match any existing records on Impel.
    '409':
      description: Conflict. Lead record couldn't be created due to a conflict with an existing record with the same lead_id on Impel.
    '500':
      description: Internal Server Error. Please contact Impel support.

  parameters:
    partnerId:
      name: partner_id
      in: header
      description: This parameter uniquely identifies an Impel partner and will be used for API authentication and authorization.
      required: true
      schema:
        type: string
    xApiKey:
      name: x_api_key
      in: header
      description: An API Key provided by CE team that will be used for API authentication and authorization.
      required: true
      schema:
        type: string
    dealerId:
      name: dealer_id
      in: query
      description: The ID assigned to the dealership by Impel during onboarding.
      required: true
      schema:
        type: string
        minLength: 1
        maxLength: 100
        example: "test_dealer_id"
    crmDealerId:
      name: crm_dealer_id
      in: query
      description: Uniquely identifies a dealer in the CRM.
      required: true
      schema:
        type: string
        minLength: 1
        maxLength: 50
        example: "test_crm_dealer_id"
    integrationPartnerName:
      name: integration_partner_name
      in: query
      description: The name of the integration partner assigned by Impel
      required: true
      schema:
        type: string
        example: "TESTCRM"
    leadId:
      name: lead_id
      in: path
      required: true
      description: Impel Lead ID for which details are to be retrieved or updated.
      schema:
        type: integer
    crmLeadId:
      name: crm_lead_id
      in: path
      required: true
      description: CRM Lead ID for which details are to be retrieved or updated.
      schema:
        type: string
        example: "test_crm_lead_id"
        maxLength: 100
    crmConsumerId:
      name: crm_consumer_id
      in: path
      required: true
      description: CRM Consumer ID for which details are to be retrieved or updated.
      schema:
        type: string
        example: "test_crm_consumer_id"
        maxLength: 50
    consumerId:
      name: consumer_id
      in: path
      required: true
      description: ID of the consumer
      schema:
        type: integer
    activityId:
      name: activity_id
      in: path
      required: true
      description: The ID of the activity in the CRM persistence data layer.
      schema:
        type: integer
    dbCreationDateStart:
      name: db_creation_date_start
      in: query
      required: true
      description: Specifies the earliest 'db_creation_date' in UTC format to include in the query for created leads.
      schema:
        type: string
        format: date-time
        example: 2023-05-25T06:35:34
    dbCreationDateEnd:
      name: db_creation_date_end
      in: query
      required: true
      description: Specifies the latest 'db_creation_date' in UTC format to include in the query for created leads.
      schema:
        type: string
        format: date-time
        example: 2023-05-25T06:35:34
    page:
      name: page
      in: query
      required: false
      description:  The results page to retrieve, starts at 1.
      schema:
        type: integer
        minimum: 1
    resultCount:
      name: result_count
      in: query
      required: false
      description: The number of results per page to return.
      schema:
        type: integer
        minimum: 1
        maximum: 1000
